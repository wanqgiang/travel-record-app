name: éƒ¨ç½²åˆ°GitHub Pages

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  deploy:
    runs-on: ubuntu-latest
    
    steps:
    - name: æ£€å‡ºä»£ç 
      uses: actions/checkout@v3
      
    - name: è®¾ç½®Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '18'
        
    - name: å®‰è£…ä¾èµ–
      run: |
        if [ -f package.json ]; then
          npm ci
        else
          echo "æ— éœ€å®‰è£…ä¾èµ–"
        fi
        
    - name: è¿è¡Œæµ‹è¯•
      run: |
        echo "è¿è¡ŒåŸºæœ¬æ£€æŸ¥..."
        # æ£€æŸ¥HTMLæ–‡ä»¶æ˜¯å¦å­˜åœ¨
        if [ ! -f index.html ]; then
          echo "é”™è¯¯: index.html æ–‡ä»¶ä¸å­˜åœ¨"
          exit 1
        fi
        echo "âœ… HTMLæ–‡ä»¶æ£€æŸ¥é€šè¿‡"
        
        # æ£€æŸ¥CSSæ–‡ä»¶æ˜¯å¦å­˜åœ¨
        if [ ! -f css/style.css ]; then
          echo "é”™è¯¯: CSSæ–‡ä»¶ä¸å­˜åœ¨"
          exit 1
        fi
        echo "âœ… CSSæ–‡ä»¶æ£€æŸ¥é€šè¿‡"
        
        # æ£€æŸ¥JSæ–‡ä»¶æ˜¯å¦å­˜åœ¨
        if [ ! -f js/app.js ]; then
          echo "é”™è¯¯: JavaScriptæ–‡ä»¶ä¸å­˜åœ¨"
          exit 1
        fi
        echo "âœ… JavaScriptæ–‡ä»¶æ£€æŸ¥é€šè¿‡"
        
        echo "ğŸ‰ æ‰€æœ‰æ£€æŸ¥é€šè¿‡ï¼"
        
    - name: éƒ¨ç½²åˆ°GitHub Pages
      if: github.ref == 'refs/heads/main'
      run: |
        echo "âœ… ä»£ç å·²æ¨é€åˆ°mainåˆ†æ”¯"
        echo "âœ… GitHub Pagesä¼šè‡ªåŠ¨éƒ¨ç½²"
        echo "ğŸŒ ç½‘ç«™åœ°å€: https://wanqgiang.github.io/travel-record-app"
