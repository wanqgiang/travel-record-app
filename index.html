<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="一个优雅的旅行记录管理应用，帮助您记录和管理旅行足迹">
    <meta name="keywords" content="旅行记录,旅游,足迹,旅行日记,travel,record">
    <meta name="author" content="Travel Record App">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="我的旅行战绩">
    <meta property="og:description" content="记录和管理您的旅行足迹">
    <meta property="og:image" content="./images/og-image.png">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:title" content="我的旅行战绩">
    <meta property="twitter:description" content="记录和管理您的旅行足迹">
    
    <title>我的旅行战绩</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='45' fill='%23667eea'/%3E%3Cpath d='M30 40h40v20H30z' fill='white'/%3E%3Ccircle cx='40' cy='30' r='5' fill='white'/%3E%3Ccircle cx='60' cy='30' r='5' fill='white'/%3E%3Cpath d='M25 65h50l-5 10H30z' fill='white'/%3E%3C/svg%3E">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="./manifest.json">
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="旅行记录">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="app-container">
        <!-- 头部 -->
        <header class="header">
            <div class="header-left">
                <button class="theme-toggle" id="themeToggle" title="切换主题">
                    <i class="fas fa-moon" id="themeIcon"></i>
                </button>
            </div>
            <h1>
                <i class="fas fa-map-marked-alt"></i> 我的旅行战绩
                <span class="env-indicator" id="envIndicator"></span>
            </h1>
            <div class="header-right">
                <button class="add-btn" id="addBtn">
                    <i class="fas fa-plus"></i> 添加记录
                </button>
            </div>
        </header>

        <!-- 标签页切换 -->
        <div class="tab-container">
            <div class="tab-buttons">
                <button class="tab-btn active" data-tab="domestic">
                    <i class="fas fa-flag"></i> 国内旅行
                </button>
                <button class="tab-btn" data-tab="foreign">
                    <i class="fas fa-globe"></i> 国外旅行
                </button>
                <button class="tab-btn" data-tab="all">
                    <i class="fas fa-map-marked-alt"></i> 全部
                </button>
            </div>
        </div>

        <!-- 统计信息 -->
        <div class="stats-container">
            <div class="stat-item" title="已访问的省份/国家数量">
                <span class="stat-number" id="totalProvinces">0</span>
                <span class="stat-label"><i class="fas fa-map"></i> <span id="provincesLabel">省份</span></span>
            </div>
            <div class="stat-item" title="已访问的城市数量">
                <span class="stat-number" id="totalCities">0</span>
                <span class="stat-label"><i class="fas fa-city"></i> 城市</span>
            </div>
            <div class="stat-item" title="已访问的景点数量">
                <span class="stat-number" id="totalPlaces">0</span>
                <span class="stat-label"><i class="fas fa-map-marker-alt"></i> 景点</span>
            </div>
            <div class="stat-item" title="最近更新时间">
                <span class="stat-number" id="lastUpdate">今日</span>
                <span class="stat-label"><i class="fas fa-clock"></i> 更新</span>
            </div>
        </div>

        <!-- 搜索和筛选 -->
        <div class="search-filter-container">
            <div class="search-container">
                <input type="text" id="searchInput" placeholder="搜索省份、城市或景点..." class="search-input">
                <i class="fas fa-search search-icon"></i>
                <button class="clear-search-btn" id="clearSearch" title="清除搜索">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="filter-container">
                <button class="filter-btn" id="regionFilterBtn" title="地区筛选">
                    <i class="fas fa-filter"></i> 筛选
                </button>
                <button class="filter-btn" id="sortBtn" title="排序方式">
                    <i class="fas fa-sort"></i> 排序
                </button>
                <button class="filter-btn" id="exportBtn" title="导出数据">
                    <i class="fas fa-download"></i> 导出
                </button>
                <button class="filter-btn" id="importBtn" title="导入数据">
                    <i class="fas fa-upload"></i> 导入
                </button>
            </div>
        </div>
        
        <!-- 隐藏的文件输入 -->
        <input type="file" id="fileInput" accept=".json" style="display: none;">

        <!-- 省份列表 -->
        <div class="provinces-container" id="provincesContainer">
            <!-- 省份数据将通过JavaScript动态生成 -->
        </div>

        <!-- 添加记录模态框 -->
        <div class="modal" id="addModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>添加旅行记录</h3>
                    <button class="close-btn" id="closeModal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="provinceSelect">省份：</label>
                        <select id="provinceSelect" class="form-control">
                            <option value="">请选择省份</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="cityInput">城市：</label>
                        <input type="text" id="cityInput" class="form-control" placeholder="输入城市名称">
                    </div>
                    <div class="form-group">
                        <label for="placesInput">景点：</label>
                        <textarea id="placesInput" class="form-control" placeholder="输入景点名称，多个景点用逗号分隔"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="visitDate">访问日期：</label>
                        <input type="date" id="visitDate" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="notesInput">备注：</label>
                        <textarea id="notesInput" class="form-control" placeholder="添加备注信息"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="photoUpload">照片：</label>
                        <div class="photo-upload-container">
                            <div class="photo-upload-area" id="photoUploadArea">
                                <!-- 手机相册访问 -->
                                <input type="file" id="photoUpload" accept="image/*,image/heic,image/heif" multiple style="display: none;">
                                <!-- 手机相机拍照 -->
                                <input type="file" id="cameraCapture" accept="image/*" capture="environment" style="display: none;">
                                <div class="upload-placeholder" id="uploadPlaceholder">
                                    <i class="fas fa-camera"></i>
                                    <p>选择照片来源</p>
                                    <div class="photo-source-buttons">
                                        <button type="button" class="photo-source-btn" id="galleryBtn">
                                            <i class="fas fa-images"></i>
                                            <span>相册</span>
                                        </button>
                                        <button type="button" class="photo-source-btn" id="cameraBtn">
                                            <i class="fas fa-camera"></i>
                                            <span>拍照</span>
                                        </button>
                                    </div>
                                    <small>支持 JPG、PNG 格式，单张不超过 5MB</small>
                                </div>
                                <div class="photo-preview-grid" id="photoPreviewGrid"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" id="cancelBtn">取消</button>
                    <button class="btn btn-primary" id="saveBtn">保存</button>
                </div>
            </div>
        </div>

        <!-- 记录详情模态框 -->
        <div class="modal" id="detailModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="detailTitle">记录详情</h3>
                    <button class="close-btn" id="closeDetailModal">&times;</button>
                </div>
                <div class="modal-body" id="detailBody">
                    <!-- 详情内容将通过JavaScript动态生成 -->
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary" id="editBtn">编辑记录</button>
                    <button class="btn btn-danger" id="deleteBtn">删除记录</button>
                    <button class="btn btn-secondary" id="closeDetailBtn">关闭</button>
                </div>
            </div>
        </div>
        
        <!-- 照片全屏浏览 -->
        <div class="photo-lightbox" id="photoLightbox">
            <button class="lightbox-close" id="lightboxClose">
                <i class="fas fa-times"></i>
            </button>
            <img class="lightbox-img" id="lightboxImg" alt="全屏查看">
        </div>
    </div>

    <!-- 版本信息显示 -->
    <div class="version-info" id="versionInfo">
        <span class="version-text" id="versionText">v1.0.0</span>
        <span class="build-time" id="buildTime"></span>
    </div>

    <script src="js/config.js"></script>
    <script src="js/version.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/data.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
